"use strict";let J,K;(()=>{const j=new Map;J={register(m,h,b){j.set(m,{d:h,f:b,exp:{}})}};async function B(m,h){let b=m.replace(/\.\w+$/i,"");if(b.includes("./")){const[O,...R]=b.split("/").reverse(),[,...d]=h.split("/").reverse(),F=[O];let P=0,N;for(;N=R.shift();)if(N==="..")P++;else{if(N===".")break;F.push(N)}P<d.length&&F.push(...d.slice(P)),b=F.reverse().join("/")}return j.has(b)?G(b):import(m)}function k(m,h){return{id:m,import:b=>B(b,m),meta:{url:m,main:h}}}function I(m){return(h,b)=>{const O=typeof h=="string"?{[h]:b}:h;for(const[R,d]of Object.entries(O))Object.defineProperty(m,R,{value:d,writable:!0,enumerable:!0});return b}}function A(m){for(const[h,b]of j.entries()){const{f:O,exp:R}=b,{execute:d,setters:F}=O(I(R),k(h,h===m));delete b.f,b.e=d,b.s=F}}async function G(m){if(!j.has(m))return;const h=j.get(m);if(h.s){const{d:b,e:O,s:R}=h;delete h.s,delete h.e;for(let F=0;F<R.length;F++)R[F](await G(b[F]));const d=O();d&&await d}return h.exp}function Q(m){if(!j.has(m))return;const h=j.get(m);if(h.s){const{d:b,e:O,s:R}=h;delete h.s,delete h.e;for(let d=0;d<R.length;d++)R[d](Q(b[d]));O()}return h.exp}K=(m,h)=>(J=K=void 0,A(m),h?G(m):Q(m))})(),J.register("diff",[],function(j,B){"use strict";var k,I,A,G=B&&B.id;function Q(e,r,n,a){if(e===r)return e?[[A,e]]:[];if(n!=null){var l=z(e,r,n);if(l)return l}var t=O(e,r),i=e.substring(0,t);e=e.substring(t),r=r.substring(t),t=R(e,r);var s=e.substring(e.length-t);e=e.substring(0,e.length-t),r=r.substring(0,r.length-t);var c=m(e,r);return i&&c.unshift([A,i]),s&&c.push([A,s]),F(c,a),c}function m(e,r){var n;if(!e)return[[I,r]];if(!r)return[[k,e]];var a=e.length>r.length?e:r,l=e.length>r.length?r:e,t=a.indexOf(l);if(t!==-1)return n=[[I,a.substring(0,t)],[A,l],[I,a.substring(t+l.length)]],e.length>r.length&&(n[0][0]=n[2][0]=k),n;if(l.length===1)return[[k,e],[I,r]];var i=d(e,r);if(i){var s=i[0],c=i[1],g=i[2],v=i[3],u=i[4],y=Q(s,g),o=Q(c,v);return y.concat([[A,u]],o)}return h(e,r)}function h(e,r){for(var n=e.length,a=r.length,l=Math.ceil((n+a)/2),t=l,i=2*l,s=new Array(i),c=new Array(i),g=0;g<i;g++)s[g]=-1,c[g]=-1;s[t+1]=0,c[t+1]=0;for(var v=n-a,u=v%2!==0,y=0,o=0,f=0,S=0,C=0;C<l;C++){for(var p=-C+y;p<=C-o;p+=2){var _=t+p,w;p===-C||p!==C&&s[_-1]<s[_+1]?w=s[_+1]:w=s[_-1]+1;for(var M=w-p;w<n&&M<a&&e.charAt(w)===r.charAt(M);)w++,M++;if(s[_]=w,w>n)o+=2;else if(M>a)y+=2;else if(u){var E=t+v-p;if(E>=0&&E<i&&c[E]!==-1){var D=n-c[E];if(w>=D)return b(e,r,w,M)}}}for(var W=-C+f;W<=C-S;W+=2){var E=t+W,D;W===-C||W!==C&&c[E-1]<c[E+1]?D=c[E+1]:D=c[E-1]+1;for(var $=D-W;D<n&&$<a&&e.charAt(n-D-1)===r.charAt(a-$-1);)D++,$++;if(c[E]=D,D>n)S+=2;else if($>a)f+=2;else if(!u){var _=t+v-W;if(_>=0&&_<i&&s[_]!==-1){var w=s[_],M=t+w-_;if(D=n-D,w>=D)return b(e,r,w,M)}}}}return[[k,e],[I,r]]}function b(e,r,n,a){var l=e.substring(0,n),t=r.substring(0,a),i=e.substring(n),s=r.substring(a),c=Q(l,t),g=Q(i,s);return c.concat(g)}function O(e,r){if(!e||!r||e.charAt(0)!==r.charAt(0))return 0;for(var n=0,a=Math.min(e.length,r.length),l=a,t=0;n<l;)e.substring(t,l)==r.substring(t,l)?(n=l,t=n):a=l,l=Math.floor((a-n)/2+n);return P(e.charCodeAt(l-1))&&l--,l}function R(e,r){if(!e||!r||e.slice(-1)!==r.slice(-1))return 0;for(var n=0,a=Math.min(e.length,r.length),l=a,t=0;n<l;)e.substring(e.length-l,e.length-t)==r.substring(r.length-l,r.length-t)?(n=l,t=n):a=l,l=Math.floor((a-n)/2+n);return N(e.charCodeAt(e.length-l))&&l--,l}function d(e,r){var n=e.length>r.length?e:r,a=e.length>r.length?r:e;if(n.length<4||a.length*2<n.length)return null;function l(o,f,S){for(var C=o.substring(S,S+Math.floor(o.length/4)),p=-1,_="",w,M,E,D;(p=f.indexOf(C,p+1))!==-1;){var W=O(o.substring(S),f.substring(p)),$=R(o.substring(0,S),f.substring(0,p));_.length<$+W&&(_=f.substring(p-$,p)+f.substring(p,p+W),w=o.substring(0,S-$),M=o.substring(S+W),E=f.substring(0,p-$),D=f.substring(p+W))}return _.length*2>=o.length?[w,M,E,D,_]:null}var t=l(n,a,Math.ceil(n.length/4)),i=l(n,a,Math.ceil(n.length/2)),s;if(!t&&!i)return null;i?t?s=t[4].length>i[4].length?t:i:s=i:s=t;var c,g,v,u;e.length>r.length?(c=s[0],g=s[1],v=s[2],u=s[3]):(v=s[0],u=s[1],c=s[2],g=s[3]);var y=s[4];return[c,g,v,u,y]}function F(e,r){e.push([A,""]);for(var n=0,a=0,l=0,t="",i="",s;n<e.length;){if(n<e.length-1&&!e[n][1]){e.splice(n,1);continue}switch(e[n][0]){case I:l++,i+=e[n][1],n++;break;case k:a++,t+=e[n][1],n++;break;case A:var c=n-l-a-1;if(r){if(c>=0&&H(e[c][1])){var g=e[c][1].slice(-1);if(e[c][1]=e[c][1].slice(0,-1),t=g+t,i=g+i,!e[c][1]){e.splice(c,1),n--;var v=c-1;e[v]&&e[v][0]===I&&(l++,i=e[v][1]+i,v--),e[v]&&e[v][0]===k&&(a++,t=e[v][1]+t,v--),c=v}}if(U(e[n][1])){var g=e[n][1].charAt(0);e[n][1]=e[n][1].slice(1),t+=g,i+=g}}if(n<e.length-1&&!e[n][1]){e.splice(n,1);break}if(t.length>0||i.length>0){t.length>0&&i.length>0&&(s=O(i,t),s!==0&&(c>=0?e[c][1]+=i.substring(0,s):(e.splice(0,0,[A,i.substring(0,s)]),n++),i=i.substring(s),t=t.substring(s)),s=R(i,t),s!==0&&(e[n][1]=i.substring(i.length-s)+e[n][1],i=i.substring(0,i.length-s),t=t.substring(0,t.length-s)));var u=l+a;t.length===0&&i.length===0?(e.splice(n-u,u),n=n-u):t.length===0?(e.splice(n-u,u,[I,i]),n=n-u+1):i.length===0?(e.splice(n-u,u,[k,t]),n=n-u+1):(e.splice(n-u,u,[k,t],[I,i]),n=n-u+2)}n!==0&&e[n-1][0]===A?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,l=0,a=0,t="",i="";break}}e[e.length-1][1]===""&&e.pop();var y=!1;for(n=1;n<e.length-1;)e[n-1][0]===A&&e[n+1][0]===A&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),y=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),y=!0)),n++;y&&F(e,r)}j("diff_cleanupMerge",F);function P(e){return e>=55296&&e<=56319}function N(e){return e>=56320&&e<=57343}function U(e){return N(e.charCodeAt(0))}function H(e){return P(e.charCodeAt(e.length-1))}function V(e){for(var r=[],n=0;n<e.length;n++)e[n][1].length>0&&r.push(e[n]);return r}function X(e,r,n,a){return H(e)||U(a)?null:V([[A,e],[k,r],[I,n],[A,a]])}function z(e,r,n){var a=typeof n=="number"?{index:n,length:0}:n.oldRange,l=typeof n=="number"?null:n.newRange,t=e.length,i=r.length;if(a.length===0&&(l===null||l.length===0)){var s=a.index,c=e.slice(0,s),g=e.slice(s),v=l?l.index:null;e:{var u=s+i-t;if(v!==null&&v!==u)break e;if(u<0||u>i)break e;var y=r.slice(0,u),o=r.slice(u);if(o!==g)break e;var f=Math.min(s,u),S=c.slice(0,f),C=y.slice(0,f);if(S!==C)break e;var p=c.slice(f),_=y.slice(f);return X(S,p,_,g)}e:{if(v!==null&&v!==s)break e;var w=s,y=r.slice(0,w),o=r.slice(w);if(y!==c)break e;var M=Math.min(t-w,i-w),E=g.slice(g.length-M),D=o.slice(o.length-M);if(E!==D)break e;var p=g.slice(0,g.length-M),_=o.slice(0,o.length-M);return X(c,p,_,E)}}if(a.length>0&&l&&l.length===0){e:{var S=e.slice(0,a.index),E=e.slice(a.index+a.length),f=S.length,M=E.length;if(i<f+M)break e;var C=r.slice(0,f),D=r.slice(i-M);if(S!==C||E!==D)break e;var p=e.slice(f,t-M),_=r.slice(f,i-M);return X(S,p,_,E)}}return null}function T(e,r,n){return Q(e,r,n,!0)}return j("diff",T),{setters:[],execute:function(){k=-1,I=1,A=0,T.INSERT=I,T.DELETE=k,T.EQUAL=A}}}),J.register("example",["diff"],function(j,B){"use strict";var k,I,A=B&&B.id;return{setters:[function(G){k=G}],execute:function(){j("run",I=async(G,Q,m,h)=>{const b=/import/gi,O="///",R=T=>m.transform(T,{plugins:[],presets:["react",["typescript",{isTSX:!0,allExtensions:!0}]]}).code.replace(b,O),d=T=>{const e=new Function("transpileCode",`return function(){ ${T} }`)();e()};let F=0,P="",N="",U=0,H="",V="";(async()=>{const T=z();H=T,V=T;const e=await h({language:"typescript",code:T,onChange:r=>{P=r,console.log(r);const n=async a=>{if(U===1)return;U=1;const l=await X(e),t=document.getElementById("error");try{if(U=0,a!==P)return;if(l&&l.length){if(P!=a)return;if(N===a)return;const i=k.diff(H,a);if(console.log(i),i.length<=3){V=a,window.monaco.editor.setTheme("hc-black");return}const s=k.diff(V,a),c=s.filter(o=>o[0]!==0);let g=i.filter(o=>o[0]===0||o[1]===c[0][1]);g.length>4&&(g=g.filter(o=>o[0]===0)),k.diff_cleanupMerge(g,!1);let v="",u=0;if(g.map(o=>{v=v+o[1],o[0]!==0&&(u=v.length)}),U=0,v!==a){e.setValue(v);const o=e.getModel("file:///Main.tsx"),f=o.getPositionAt(u),S=o.validatePosition(f);e.setPosition(S);return}const y=l.map(o=>o.messageText).join("<br />");t.innerHTML=y,t.style.display="block",N=a,window.monaco.editor.setTheme("vs-light"),setTimeout(()=>{window.monaco.editor.setTheme("hc-black")},F++);return}H=a,t.style.display="none",e.setTheme("vs-dark"),F=0,U=0,d(R(a))}catch(i){if(U=0,a!==P)return;window.monaco.editor.setTheme("vs-light"),setTimeout(()=>{window.monaco.editor.setTheme("hc-black")},10),console.error(i)}};if(!U)n(P);else{const a=r,l=setInterval(()=>{(a!==P||!U)&&clearInterval(l),U||n(P)},100)}}})})(),d(R(z()));async function X(T){const e=T.getModel("file:///main.tsx"),r=await window.monaco.languages.typescript.getTypeScriptWorker(),n=e?.uri;if(!n)return;const a=await(await r(n)).getSemanticDiagnostics("file:///main.tsx"),l=await(await r(n)).getCompilerOptionsDiagnostics("file:///main.tsx"),t=await(await r(n)).getSyntacticDiagnostics("file:///main.tsx");return[...a,...l,...t]}function z(){return`import * as React from "react";
import ReactDOM from "react-dom";

const Counter = (
{ initial = 0 }
) => {
const [clicks, setClicks] = React.useState(initial);

return <div>
    <p>Clicks: <strong>{clicks}</strong></p>
    <button onClick={() => setClicks(clicks + 1)}>+</button>
    <button onClick={() => setClicks(clicks - 1)}>-</button>
</div>;
};

ReactDOM.render(
<Counter initial={0} />,
document.getElementById("root")
);
`}})}}});const Y=K("example",!1);export const run=Y.run;
