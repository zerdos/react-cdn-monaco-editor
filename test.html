<!DOCTYPE html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">        
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>   

</head>
<body>
<script type="module">
   import {startMonaco} from "./lib/index.js";

   const editor = () => {

    // React.useEffect(()=>{

        const once = async ()=>{
            // const startMonaco = new Function(  "  return startMonaco;" + (await  (await fetch("./lib/editor.js")).text()).replace("export ", ""))();
  
           await startMonaco({value: `import React from "react";


function App() {


  const [code, changeCode] = React.useState("const foo = 42;");

  return (
    <div>
      <button
        onClick={() => {
          changeCode("const bar = 'foo';");
        }}
      >
        Reset
      </button>
      <pre>{code}</pre>
    
     <footer>the end</footer>
    </div>
  );
}

export default App;
`, onChange: (code)=>console.log("code")});

        }
        once();


       return React.createElement("div", {onChange: (ch)=>console.log(ch), style: {height: "100vh", width:"50%"}, id: "container"})
    
    }
 
    const container = document.createElement("div")

        ReactDOM.render(editor(), container);

        document.body.appendChild(container);
   
</script>
</body>